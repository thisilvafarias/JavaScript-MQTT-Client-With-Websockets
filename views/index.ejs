<html>

<head>
  <title>Smart Home</title>
  <meta charset="utf-8">
  <meta name="viewport" content="width=device-width, initial-scale=1">
  <link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/bootstrap/3.4.0/css/bootstrap.min.css">
  <script src="https://ajax.googleapis.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script src="https://maxcdn.bootstrapcdn.com/bootstrap/3.4.0/js/bootstrap.min.js"></script>
  <link rel="stylesheet" type="text/css" href="stylesheets/style.css">
  <title>IoT Web Client</title>
</head>

<!-- this is an HTML comment -->
<body>
<nav class="navbar navbar-inverse">
</nav>

<div class="jumbotron">
    <div class="container text-center">
        <h2>Smart Home</h2>
    </div>
</div>

<div class="container-fluid bg-3 text-center" style="background-color:lightgray;">
    <br>

    <div class="row"">  <!-- row one-->
    <div class="col-sm-6"">
    <!-- Slider button  for heater-->
    <div class="slidecontainer">
        <p>LIGHT <span id="led_state">OFF</span></p>
        <label class="switch">
            <input type="checkbox" onchange="led_state_change(this)">
            <span class="slider1 round"></span>
        </label>
    </div>
</div>
<div class="col-sm-6">
    <!-- Slider button  for heater-->
    <div class="slidecontainer">

        <p>HEATER <span id="heater_state">OFF</span></p>
        <label class="switch">
            <input type="checkbox" onchange="heater_state_change(this)">
            <span class="slider1 round"></span>
        </label>
    </div>
</div>
</div>
<div class="row"  style="background-color:gray;">  <!-- row two-->
    <div class="container text-center">
        <h2>Alarms <img class="logo" src="images/attention.png" alt="attention" width="3%"> </h2>
    </div>
    <div class="col-sm-4">
        Light
        <div>
            <p> DOOR <span id="story">OPEN </span></p>
        </div>
        <div>
            <p>Show here ==> <span id="story"> Door Open </span></p>

            <script>
                client.on("updated messages", text => {
                    $("#story").html(text);
                });
            </script>


        </div>

    </div>
    <div class="col-sm-4">
        Temperature
    </div>
    <div class="col-sm-4">
        Soil Moisture
    </div>
</div>
<div class="row" style="background-color:gray;" >  <!-- row four-->
    <div class="col-sm-4">
        Water Plant
    </div>
    <div class="col-sm-4">
        Soil Moisture
    </div>
    <div class="col-sm-4">
        Door
    </div>
</div>
<div class="row" style="background-color:gray;" >  <!-- row five-->
    <div class="col-sm-6">
        Window
    </div>
    <div class="col-sm-6"">
    Heater
</div>
</div>
</div><br>


<footer class="container-fluid text-center">
        <img class="logo" src="images/rpi.png" alt="attention" width="20%">
</footer>

</body>


<script>

  // Functions (jquery) to check switch **Light**
    var led_state_change = (element) => {
        if(element.checked) {
            $.ajax({
                url: '/turnOnLed',
                method: 'post',
                success: function(data){
                    $("#led_state").html("LED_ON");
                }
            });
        } else {
            $.ajax({
                url: '/turnOffLed',
                method: 'post',
                success: function(data){
                    $("#led_state").html("LED_OFF");
                }
            });
        }
    }

// Functions (jquery) to check switch **Heater**
    var heater_state_change = (element) => {
        if(element.checked) {
            $.ajax({
                url: '/turnOnHeater',
                method: 'post',
                success: function(data){
                    $("#heater_state").html("HEATER_ON");
                }
            });
        } else {
            $.ajax({
                url: '/turnOffHeater',
                method: 'post',
                success: function(data){
                    $("#heater_state").html("HEATER_OFF");
                }
            });
        }
    }

</script>
</html>