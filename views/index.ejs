<html>

<head>
    <title>Smart Home</title>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/bootstrap/3.4.0/css/bootstrap.min.css">
    <script src="https://ajax.googleapis.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
    <script src="https://maxcdn.bootstrapcdn.com/bootstrap/3.4.0/js/bootstrap.min.js"></script>
    <link rel="stylesheet" type="text/css" href="stylesheets/style.css">
    <title>IoT Web Client</title>

    <script>
        window.setInterval(() => {
            console.log("TIMEOUT");
        $( "#p_id" ).load(window.location.href + " #p_id" );
        }, 100);
    </script>


</head>

<!-- this is an HTML comment -->
<body>
<nav class="navbar navbar-inverse">
</nav>

<div class="jumbotron">
    <div class="container text-center">
        <h2>Smart Home</h2>
    </div>
</div>

<div class="container-fluid bg-3 text-center" style="background-color:lightgray;">
    <br>

    <div class="row" style="background-color:#dcdcdc;">  <!-- row one-->
    <div class="col-sm-6">
    <!-- Slider button  for heater-->
    <div class="slidecontainer">
        <h4>LIGHT <span id="led_state">OFF</span></h4>
        <label class="switch">
            <input type="checkbox" onchange="led_state_change(this)">
            <span class="slider1 round"></span>
        </label>
    </div>
</div>
<div class="col-sm-6">
     <!-- Slider button  for heater-->
    <div class="slidecontainer">
        <h4>HEATER <span id="heater_state">OFF</span></h4>
        <label class="switch">
            <input type="checkbox" onchange="heater_state_change(this)">
            <span class="slider1 round"></span>
        </label>
    </div>
</div>
</div>
    <br>
<div class="row">  <!-- row two-->
    <div class="col-sm-4">
        <img class="logo" src="images/light.png" alt="attention" width="25%"> <br>
        <h4>Light is ON/OFF</h4>
    </div>
    <div class="col-sm-4">
        <img class="logo" src="images/temperature.png" alt="attention" width="30%"> <br>
        <h4>Temperature</h4>
    </div>
    <div class="col-sm-4">
        <img class="logo" src="images/soil.png" alt="attention" width="45%"> <br>
        <h4>Soil Moisture</h4>
    </div>
</div>
<div class="row" style="background-color:gray;" >  <!-- row four-->
    <div class="container text-center">
        <h2>Alarms <img class="logo" src="images/attention.png" alt="attention" width="3%"> </h2>
    </div>
    <div class="col-sm-4">
        <img class="logo" src="images/plant.png" alt="attention" width="25%"> <br>
        <h4>Water Plant</h4>
    </div>
    <div class="col-sm-4">
        <img class="logo" src="images/moveSensor.png" alt="attention" width="25%"> <br>
        <h4>Move Sensor</h4>
    </div>
    <div class="col-sm-4">
        <img class="logo" src="images/door.png" alt="attention" width="25%"> <br>
        <h4 id="p_id"> <%= msg %> </p>
    </div>
</div>
<div class="row" style="background-color:gray;" >  <!-- row five-->
    <div class="col-sm-6">
        <img class="logo" src="images/window.png" alt="attention" width="18%"> <br>
        <h4>Window</h4>
    </div>
    <div class="col-sm-6"">
    <img class="logo" src="images/heater.png" alt="attention" width="15%"><br>
    <h4>Heater on/off</h4>
</div>
</div>
</div><br>


<footer class="container-fluid text-center">
    <img class="logo" src="images/rpi.png" alt="attention" width="20%">
</footer>

</body>


<script>

    // Functions (jquery) to check switch **Light**
    var led_state_change = (element) => {
        if(element.checked) {
            $.ajax({
                url: '/turnOnLed',
                method: 'post',
                success: function(data){
                    $("#led_state").html("LED_ON");
                }
            });
        } else {
            $.ajax({
                url: '/turnOffLed',
                method: 'post',
                success: function(data){
                    $("#led_state").html("LED_OFF");
                }
            });
        }
    }

    // Functions (jquery) to check switch **Heater**
    var heater_state_change = (element) => {
        if(element.checked) {
            $.ajax({
                url: '/turnOnHeater',
                method: 'post',
                success: function(data){
                    $("#heater_state").html("HEATER_ON");
                }
            });
        } else {
            $.ajax({
                url: '/turnOffHeater',
                method: 'post',
                success: function(data){
                    $("#heater_state").html("HEATER_OFF");
                }
            });
        }
    }

</script>
</html>